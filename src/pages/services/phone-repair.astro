---
import Layout from '../../layouts/Layout.astro';
import StructuredData from '../../components/StructuredData.astro';
import FAQ from '../../components/FAQ.astro';
import { siteConfig, businessInfo } from '../../config';
import { withBase } from '../../utils/url';

const serviceName = 'Phone Repair';
const serviceDescription = 'Fast and reliable phone repair services for iPhone, Samsung, and all major brands. Screen replacement, battery repair, and more.';

// Service schema
const serviceSchema = {
  '@context': 'https://schema.org',
  '@type': 'Service',
  serviceType: 'Phone Repair',
  provider: {
    '@type': 'LocalBusiness',
    name: businessInfo.name,
    telephone: businessInfo.phone,
    address: {
      '@type': 'PostalAddress',
      streetAddress: businessInfo.address.street,
      addressLocality: businessInfo.address.city,
      postalCode: businessInfo.address.postcode,
      addressCountry: businessInfo.address.country,
    },
  },
  areaServed: ['Morden', 'Wimbledon', 'Kingston', 'Sutton', 'Croydon', 'Epsom'],
  description: serviceDescription,
};

const faqData = [
  {
    question: 'Which phone brands do you repair?',
    answer: 'We repair all major phone brands including Apple iPhone, Samsung Galaxy, Google Pixel, OnePlus, Huawei, and more. Our technicians are certified and experienced with the latest models.',
  },
  {
    question: 'How much does phone screen replacement cost?',
    answer: 'Screen replacement costs vary by model. iPhone screen repairs typically start from £80, Samsung screens from £70. We use high-quality replacement screens and provide warranty on all repairs.',
  },
  {
    question: 'How long does phone repair take?',
    answer: 'Most phone repairs including screen replacement, battery replacement, and charging port repair can be completed within 1-2 hours while you wait. More complex repairs may take 24-48 hours.',
  },
  {
    question: 'Will my phone data be safe during repair?',
    answer: 'Yes, we take data security seriously. In most cases, we don\'t need to access your data for repairs. If data access is required, we follow strict protocols to protect your information.',
  },
  {
    question: 'Do you offer same-day phone repair?',
    answer: 'Yes, many phone repairs can be completed same-day, often while you wait. We stock common parts for popular models to ensure fast turnaround times.',
  },
  {
    question: 'Can you repair water-damaged phones?',
    answer: 'Yes, we offer water damage repair services. Success depends on the extent of damage and how quickly you bring the device in. We can often recover phones that have been water-damaged if treated promptly.',
  },
];

// Icon map for repair types
const repairIconMap: Record<string, string> = {
  screen: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" /></svg>',
  battery: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5h10.5a2.25 2.25 0 0 0 2.25-2.25V9.75a2.25 2.25 0 0 0-2.25-2.25H3.75M3.75 19.5h10.5a2.25 2.25 0 0 0 2.25-2.25v-1.5a2.25 2.25 0 0 0-2.25-2.25H3.75m0 0v-9m0 9h10.5M3.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v1.5a2.25 2.25 0 0 1-2.25 2.25H3.75V4.5Zm16.5 0v9m0-9h-1.5m1.5 9h-1.5m-9-9v9m0-9h1.5m-1.5 9h1.5" /></svg>',
  charging: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" /></svg>',
  camera: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-4.5-2.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" /></svg>',
  speaker: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z" /></svg>',
  water: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" /></svg>',
  button: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-1.993 2.057H3a1.5 1.5 0 0 0 0 3h18a1.5 1.5 0 0 0 0-3h-.75a2.25 2.25 0 0 1-1.993-2.057 3 3 0 0 0-5.78-1.128m-5.78-1.128a3 3 0 0 1 5.78 1.128m5.78-1.128a3 3 0 1 1-5.78 1.128" /></svg>',
  software: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" /></svg>',
};

const commonRepairs = [
  {
    title: "Screen Replacement",
    icon: "screen",
    description: "Cracked, broken, or unresponsive screens for all models",
  },
  {
    title: "Battery Replacement",
    icon: "battery",
    description: "New batteries for improved battery life",
  },
  {
    title: "Charging Port Repair",
    icon: "charging",
    description: "Fix charging issues and port replacement",
  },
  {
    title: "Camera Repair",
    icon: "camera",
    description: "Front and rear camera replacement and repair",
  },
  {
    title: "Speaker Repair",
    icon: "speaker",
    description: "Speaker and microphone replacement",
  },
  {
    title: "Water Damage",
    icon: "water",
    description: "Water damage assessment and repair",
  },
  {
    title: "Button Repair",
    icon: "button",
    description: "Power button, volume buttons, and home button repair",
  },
  {
    title: "Software Issues",
    icon: "software",
    description: "Software updates, factory reset, and troubleshooting",
  },
];

// Common issues images - flexible structure for 1 or multiple images
const commonIssues = [
  {
    imageWebp: "/phone-repair/broken-screen.webp",
    alt: "Broken phone screen repair service - cracked screen replacement for iPhone, Samsung, and all phone brands",
    title: "Broken Screen Repair",
    description: "Expert screen replacement for cracked, shattered, or unresponsive phone displays",
  },
  {
    imageWebp: "/phone-repair/battery-replacement.webp",
    alt: "Phone battery replacement service - swollen battery repair and new battery installation",
    title: "Battery Replacement",
    description: "Professional battery replacement for improved battery life and safety",
  },
  {
    imageWebp: "/phone-repair/not-charging.webp",
    alt: "Phone charging port repair - phone not charging fix and charging port replacement service",
    title: "Phone not charging?",
    description: "Expert diagnosis and repair of charging issues and port replacement",
  },
];
---

<Layout 
  title={serviceName}
  description={serviceDescription}
  canonical={`${siteConfig.url}/services/phone-repair`}
>
  <StructuredData schema={serviceSchema} />

  <!-- Hero Section -->
  <section class="py-9 bg-dark-section">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto animate-fade-in">
        <div class="flex mb-6">
          <div class="w-32 h-1.5 bg-accent-primary rounded-full"></div>
        </div>
        <h1 class="text-4xl font-bold mb-4 text-dark-primary">{serviceName}</h1>
        <p class="text-xl text-dark-secondary mb-8">{serviceDescription}</p>
      </div>
    </div>
  </section>

  <!-- Common Repairs Section -->
  <section class="py-9 bg-dark-darker scroll-reveal">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="prose max-w-none mb-12">
          <h2
            class="text-2xl font-bold mb-8 text-dark-primary border-b-2 border-accent-primary/30 pb-2 inline-block"
          >
            Common Phone Repairs
          </h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {commonRepairs.map((repair) => (
            <div class="bg-dark-card rounded-xl border border-dark p-6 hover:border-accent-subtle transition-all duration-200 hover:shadow-lg">
              <div class="text-accent-primary mb-4" set:html={repairIconMap[repair.icon]}></div>
              <h3 class="text-lg font-bold mb-2 text-dark-primary">{repair.title}</h3>
              <p class="text-sm text-dark-secondary leading-relaxed">{repair.description}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Common Issues We Fix Section -->
  {commonIssues.length > 0 && (
    <section class="py-9 bg-dark-section scroll-reveal">
      <div class="container mx-auto px-4">
        <div class="max-w-6xl mx-auto">
          <div class="prose max-w-none mb-12">
            <h2
              class="text-2xl font-bold mb-4 text-dark-primary border-b-2 border-accent-primary/30 pb-2 inline-block"
            >
              Common Issues We Fix
            </h2>
            <p class="text-dark-secondary mt-4 max-w-3xl">
              See examples of common phone issues we repair. Our experienced technicians can diagnose and fix these problems quickly and affordably.
            </p>
          </div>
          <div
            class={`grid grid-cols-1 ${
              commonIssues.length === 1
                ? "md:grid-cols-1 max-w-2xl mx-auto"
                : commonIssues.length === 2
                ? "md:grid-cols-2"
                : "md:grid-cols-2 lg:grid-cols-3"
            } gap-6`}
          >
            {commonIssues.map((issue) => (
              <div class="bg-dark-card rounded-xl border border-dark overflow-hidden hover:border-accent-subtle transition-all duration-200 hover:shadow-lg group">
                <div class="relative overflow-hidden">
                  <img
                    src={withBase(issue.imageWebp)}
                    alt={issue.alt}
                    loading="lazy"
                    class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105"
                  />
                </div>
                {(issue.title || issue.description) && (
                  <div class="p-6">
                    {issue.title && (
                      <h3 class="text-lg font-bold mb-2 text-dark-primary">{issue.title}</h3>
                    )}
                    {issue.description && (
                      <p class="text-sm text-dark-secondary leading-relaxed">{issue.description}</p>
                    )}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- Why Choose Us Section -->
  <section class="py-9 bg-dark-section scroll-reveal">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold mb-4 text-dark-primary">Why Choose Us for Phone Repair?</h2>
        <p class="text-dark-secondary mb-4">
          Our phone repair service is fast, affordable, and reliable. We use high-quality replacement 
          parts and our experienced technicians can often complete repairs while you wait.
        </p>
        <p class="text-dark-secondary">
          We also offer on-site phone repair services for businesses throughout South London and surrounding regions. Contact now to inquire if unsure, making it convenient to get your device fixed without leaving your office.
        </p>
      </div>
    </div>
  </section>

  <!-- While-You-Wait Section -->
  <section class="py-9 bg-dark-darker scroll-reveal">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="border-l-4 border-accent-primary p-6 mb-12 rounded-lg scroll-reveal shadow-card bg-dark-card border-dark">
          <h3 class="text-xl font-bold mb-2 text-dark-primary">While-You-Wait Service</h3>
          <p class="text-dark-secondary">
            Most phone repairs can be completed in 1-2 hours while you wait. We'll provide you with a 
            comfortable waiting area and keep you updated on the progress of your repair.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-9 bg-dark-section scroll-reveal">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <FAQ questions={faqData} variant="dark" />

        <div class="mt-12 text-center">
          <a 
            href={withBase('/contact')} 
            class="btn-primary glow-effect inline-block mr-4"
          >
            Book a Repair
          </a>
          <a 
            href={withBase('/services')} 
            class="btn-secondary inline-block"
          >
            View All Services
          </a>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Scroll reveal animation
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.scroll-reveal').forEach(el => {
      observer.observe(el);
    });
  </script>
</Layout>


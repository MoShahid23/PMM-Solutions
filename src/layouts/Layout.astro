---
import { siteConfig, businessInfo, gaId, services, serviceAreas, socialMedia, newsletterEndpoint } from '../config';
import '../styles/global.css';
import Logo from '../components/Logo.astro';

interface Props {
  title: string;
  description?: string;
  canonical?: string;
  image?: string;
  type?: string;
}

const {
  title,
  description = siteConfig.description,
  canonical,
  image = `${siteConfig.url}/og-image.jpg`,
  type = 'website',
} = Astro.props;

const fullTitle = `${title} | ${siteConfig.name}`;
const url = canonical || `${siteConfig.url}${Astro.url.pathname}`;
---

<!doctype html>
<html lang={siteConfig.locale}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={description} />
    {canonical && <link rel="canonical" href={canonical} />}
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={url} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={url} />
    <meta property="twitter:title" content={fullTitle} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={image} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Custom Dropdown Styles -->
    <style>
      /* Staggered fade-in transition for dropdown items */
      .dropdown-item {
        opacity: 0;
        transform: translateY(-8px);
        transition: opacity 0.3s ease-out, transform 0.3s ease-out;
      }

      /* Visible state when parent group is hovered */
      .group:hover .dropdown-item {
        opacity: 1;
        transform: translateY(0);
      }

      /* Scroll shadows for long lists - dark theme */
      .scroll-shadow-container-dark {
        background-color: rgb(31, 41, 55); /* base dark-darker color */
        background-image:
          linear-gradient(rgb(31, 41, 55) 30%, rgba(31, 41, 55, 0)) center top,
          linear-gradient(rgba(31, 41, 55, 0), rgb(31, 41, 55) 70%) center bottom,
          radial-gradient(farthest-side at 50% 0, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0)) center top,
          radial-gradient(farthest-side at 50% 100%, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0)) center bottom;
        background-repeat: no-repeat;
        background-size: 100% 40px, 100% 40px, 100% 14px, 100% 14px;
        background-attachment: local, local, scroll, scroll;
      }

      /* Modern scrollbar styling - dark theme */
      .scroll-shadow-container-dark {
        /* Firefox scrollbar */
        scrollbar-width: thin;
        scrollbar-color: rgba(37, 99, 235, 0.6) rgba(31, 41, 55, 0.3);
      }

      /* Webkit scrollbar (Chrome, Safari, Edge) */
      .scroll-shadow-container-dark::-webkit-scrollbar {
        width: 5px;
      }

      .scroll-shadow-container-dark::-webkit-scrollbar-track {
        background: rgba(31, 41, 55, 0.3);
        border-radius: 10px;
        margin: 4px 0;
      }

      .scroll-shadow-container-dark::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, rgba(37, 99, 235, 0.7) 0%, rgba(37, 99, 235, 0.5) 100%);
        border-radius: 10px;
        border: 1px solid rgba(31, 41, 55, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 4px rgba(37, 99, 235, 0.2);
      }

      .scroll-shadow-container-dark::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, rgba(37, 99, 235, 0.9) 0%, rgba(37, 99, 235, 0.7) 100%);
        box-shadow: 0 0 8px rgba(37, 99, 235, 0.4);
        transform: scaleX(1.1);
      }

      .scroll-shadow-container-dark::-webkit-scrollbar-thumb:active {
        background: linear-gradient(180deg, rgba(37, 99, 235, 1) 0%, rgba(37, 99, 235, 0.9) 100%);
        box-shadow: 0 0 12px rgba(37, 99, 235, 0.6);
      }

      /* Enhanced focus visible for keyboard navigation */
      a:focus-visible,
      button:focus-visible {
        outline: 2px solid #2563EB;
        outline-offset: 2px;
        border-radius: 0.5rem;
      }

      /* Subtle tinted header background for readability */
      .header-overlay {
        background: rgba(15, 23, 42, 0.82);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        border-bottom: 1px solid rgba(148, 163, 184, 0.18);
      }

      .dropdown-surface {
        background: rgba(15, 23, 42, 0.94);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(148, 163, 184, 0.2);
      }

      .dropdown-surface .scroll-shadow-container-dark {
        background-color: transparent !important;
      }
    </style>

    <!-- Google Analytics 4 -->
    {gaId && gaId !== 'G-XXXXXXXXXX' && (
      <>
        <script async src={`https://www.googletagmanager.com/gtag/js?id=${gaId}`}></script>
        <script is:inline>
          {`
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '${gaId}');
          `}
        </script>
      </>
    )}
  </head>
  <body>
    <header class="header-overlay shadow-soft sticky top-0 z-50">
      <nav class="container mx-auto px-4 py-5">
        <div class="flex justify-between items-center">
          <a href="/" class="transition-all duration-200 hover:opacity-80">
            <Logo variant="minimal" />
          </a>
          <ul class="hidden lg:flex gap-8 items-center">
            <li><a href="/" class="text-dark-primary hover:text-accent-primary transition-colors duration-200 font-medium">Home</a></li>
            
            <!-- Services Dropdown -->
            <li class="relative group">
              <a
                href="/services"
                class={`text-dark-primary hover:text-accent-primary flex items-center gap-1 transition-all duration-300 ease-out font-medium ${Astro.url.pathname.startsWith('/services') ? 'text-accent-primary font-semibold' : ''}`}
                aria-expanded="false"
                aria-haspopup="true"
              >
                Services
                <svg class="w-4 h-4 transition-transform duration-300 ease-out group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </a>
              <ul
                role="menu"
                class="dropdown-menu dropdown-surface absolute left-0 mt-0 w-56 rounded-2xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-out py-3 z-50 overflow-hidden"
                style="box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);"
              >
                {services.map((service, index) => (
                  <li class="dropdown-item" style={`transition-delay: ${100 + (index * 40)}ms`}>
                    <a
                      href={`/services/${service.slug}`}
                      role="menuitem"
                      tabindex="-1"
                      class="block px-4 py-2.5 text-dark-secondary hover:text-white transition-colors duration-200 rounded-lg mx-2 underline-offset-4 hover:underline focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-dark-darker"
                    >
                      {service.name}
                    </a>
                  </li>
                ))}
                <li class="border-t border-gray-700 mt-2 pt-2">
                  <a
                    href="/services"
                    role="menuitem"
                    tabindex="-1"
                    class="block px-4 py-2.5 text-accent-primary hover:text-accent-primary-hover font-semibold transition-colors duration-200 rounded-lg mx-2 underline-offset-4 hover:underline focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-dark-darker"
                  >
                    View All Services →
                  </a>
                </li>
              </ul>
            </li>

            <!-- Service Areas Dropdown -->
            <li class="relative group">
              <a
                href="/locations"
                class={`text-dark-primary hover:text-accent-primary flex items-center gap-1 transition-all duration-300 ease-out font-medium ${Astro.url.pathname.startsWith('/locations') || Astro.url.pathname.startsWith('/tech-repair-in') ? 'text-accent-primary font-semibold' : ''}`}
                aria-expanded="false"
                aria-haspopup="true"
              >
                Service Areas
                <svg class="w-4 h-4 transition-transform duration-300 ease-out group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </a>
              <div
                role="menu"
                class="dropdown-menu dropdown-surface absolute left-0 mt-0 w-64 rounded-2xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-out z-50 flex flex-col max-h-96"
                style="box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);"
              >
                <ul class="scroll-shadow-container-dark overflow-y-auto flex-1 py-3">
                  {serviceAreas.map((area, index) => (
                    <li class="dropdown-item" style={`transition-delay: ${100 + (index * 30)}ms`}>
                      <a
                        href={`/tech-repair-in/${area.slug}`}
                        role="menuitem"
                        tabindex="-1"
                        class="block px-4 py-2.5 text-dark-secondary hover:text-white transition-colors duration-200 rounded-lg mx-2 underline-offset-4 hover:underline focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-dark-darker"
                      >
                        {area.name}
                      </a>
                    </li>
                  ))}
                </ul>
                <div class="border-t border-gray-700 pt-2 pb-3 dropdown-surface flex-shrink-0">
                  <a
                    href="/locations"
                    role="menuitem"
                    tabindex="-1"
                    class="block px-4 py-2.5 text-accent-primary hover:text-accent-primary-hover font-semibold transition-colors duration-200 rounded-lg mx-2 underline-offset-4 hover:underline focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-dark-darker"
                  >
                    View All Service Areas →
                  </a>
                </div>
              </div>
            </li>

            <li><a href="/about" class={`text-dark-primary hover:text-accent-primary transition-colors duration-200 font-medium ${Astro.url.pathname.startsWith('/about') ? 'text-accent-primary font-semibold' : ''}`}>About</a></li>
            <li><a href="/contact" class={`text-dark-primary hover:text-accent-primary transition-colors duration-200 font-medium ${Astro.url.pathname.startsWith('/contact') ? 'text-accent-primary font-semibold' : ''}`}>Contact</a></li>
          </ul>

          <!-- Phone & Social Icons (Desktop) -->
          <div class="hidden lg:flex items-center gap-4">
            <!-- Phone Button -->
            <a
              href={`tel:${businessInfo.phone}`}
              class="flex items-center gap-2 bg-accent-primary text-white px-4 py-2 rounded-xl hover:bg-accent-primary-hover transition-all duration-200 hover:-translate-y-0.5 shadow-soft group"
            >
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
              </svg>
              <span class="font-medium text-sm">{businessInfo.phone}</span>
            </a>

            <!-- Social Icons -->
            <div class="flex items-center gap-3">
              <a
                href={socialMedia.facebook}
                target="_blank"
                rel="noopener noreferrer"
                class="w-11 h-11 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 hover:scale-110 group"
                aria-label="Facebook"
              >
                <svg class="w-5 h-5 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                </svg>
              </a>
              <a
                href={socialMedia.youtube}
                target="_blank"
                rel="noopener noreferrer"
                class="w-11 h-11 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 hover:scale-110 group"
                aria-label="YouTube"
              >
                <svg class="w-5 h-5 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd"></path>
                </svg>
              </a>
              <a
                href={socialMedia.instagram}
                target="_blank"
                rel="noopener noreferrer"
                class="w-11 h-11 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 hover:scale-110 group"
                aria-label="Instagram"
              >
                <svg class="w-5 h-5 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                </svg>
              </a>
            </div>
          </div>

          <!-- Mobile: Phone Icon & Menu Button -->
          <div class="flex lg:hidden items-center gap-2">
            <a
              href={`tel:${businessInfo.phone}`}
              class="flex items-center gap-2 bg-accent-primary text-white px-3 py-2 rounded-xl hover:bg-accent-primary-hover transition-all duration-200 shadow-soft text-sm font-medium"
              aria-label="Call us"
            >
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
              </svg>
              <span>{businessInfo.phone}</span>
            </a>
            <button
              id="mobile-menu-button"
              class="p-2 text-dark-primary hover:text-accent-primary transition-colors duration-200"
              aria-label="Toggle menu"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>
                
                <!-- Mobile Menu -->
                <div id="mobile-menu" class="hidden lg:hidden mt-4 pb-4 max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-in-out">
                  <ul class="space-y-2">
                    <li><a href="/" class="block py-3 px-2 text-dark-primary hover:text-accent-primary hover:bg-white/10 rounded-lg transition-all duration-300 font-medium min-h-[48px] flex items-center">Home</a></li>
                    <li>
                      <a 
                        href="/services" 
                        id="mobile-services-link"
                        class="flex items-center justify-between py-3 px-2 hover:bg-white/10 rounded-lg transition-all duration-300 min-h-[48px] text-dark-primary hover:text-accent-primary font-semibold transition-colors duration-300"
                      >
                        <span>Services</span>
                        <svg id="mobile-services-icon" class="w-5 h-5 transition-transform duration-300 ease-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </a>
                      <ul id="mobile-services-menu" class="hidden ml-2 mt-1 space-y-1 max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-in-out bg-dark-darker rounded-lg border-l-4 border-accent-primary/50">
                        {services.map((service) => (
                          <li>
                            <a href={`/services/${service.slug}`} class="block py-3 px-4 text-sm text-dark-secondary hover:text-white hover:bg-accent-primary/20 rounded-lg transition-all duration-300 min-h-[48px] flex items-center border-l-4 border-transparent hover:border-accent-primary">
                              {service.name}
                            </a>
                          </li>
                        ))}
                        <li class="border-t border-gray-700 mt-2 pt-2">
                          <a
                            href="/services"
                            class="block py-3 px-4 text-accent-primary hover:text-accent-primary-hover font-semibold transition-all duration-300 min-h-[48px] flex items-center"
                          >
                            View All Services →
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a 
                        href="/locations" 
                        id="mobile-areas-link"
                        class="flex items-center justify-between py-3 px-2 hover:bg-white/10 rounded-lg transition-all duration-300 min-h-[48px] text-dark-primary hover:text-accent-primary font-semibold transition-colors duration-300"
                      >
                        <span>Service Areas</span>
                        <svg id="mobile-areas-icon" class="w-5 h-5 transition-transform duration-300 ease-out" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </a>
                      <ul id="mobile-areas-menu" class="hidden ml-2 mt-1 space-y-1 max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-in-out bg-dark-darker rounded-lg border-l-4 border-accent-primary/50">
                        {serviceAreas.map((area) => (
                          <li>
                            <a href={`/tech-repair-in/${area.slug}`} class="block py-3 px-4 text-sm text-dark-secondary hover:text-white hover:bg-accent-primary/20 rounded-lg transition-all duration-300 min-h-[48px] flex items-center border-l-4 border-transparent hover:border-accent-primary">
                              {area.name}
                            </a>
                          </li>
                        ))}
                        <li class="border-t border-gray-700 mt-2 pt-2">
                          <a
                            href="/locations"
                            class="block py-3 px-4 text-accent-primary hover:text-accent-primary-hover font-semibold transition-all duration-300 min-h-[48px] flex items-center"
                          >
                            View All Service Areas →
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li><a href="/about" class="block py-3 px-2 text-dark-primary hover:text-accent-primary hover:bg-white/10 rounded-lg transition-all duration-300 font-medium min-h-[48px] flex items-center">About</a></li>
                    <li><a href="/contact" class="block py-3 px-2 text-dark-primary hover:text-accent-primary hover:bg-white/10 rounded-lg transition-all duration-300 font-medium min-h-[48px] flex items-center">Contact</a></li>

                    <!-- Social Media Icons (Mobile) -->
                    <li class="pt-4 mt-4 border-t border-border-color">
                      <p class="text-sm font-semibold text-dark-secondary mb-3">Follow Us</p>
                      <div class="flex gap-4">
                        <a
                          href={socialMedia.facebook}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="w-12 h-12 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 group"
                          aria-label="Facebook"
                        >
                          <svg class="w-6 h-6 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                          </svg>
                        </a>
                        <a
                          href={socialMedia.youtube}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="w-12 h-12 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 group"
                          aria-label="YouTube"
                        >
                          <svg class="w-6 h-6 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd"></path>
                          </svg>
                        </a>
                        <a
                          href={socialMedia.instagram}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="w-12 h-12 rounded-full bg-bg-elevated hover:bg-accent-primary flex items-center justify-center transition-all duration-200 group"
                          aria-label="Instagram"
                        >
                          <svg class="w-6 h-6 text-accent-primary group-hover:text-white transition-colors duration-200" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                          </svg>
                        </a>
                      </div>
                    </li>
                  </ul>
                </div>
      </nav>
    </header>
    
    <script>
      // Mobile menu toggle with smooth animation
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');

      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
          const isOpen = !mobileMenu.classList.contains('hidden') && !mobileMenu.classList.contains('max-h-0');

          if (isOpen) {
            // Close menu: animate out, then hide
            mobileMenu.classList.remove('max-h-screen', 'opacity-100');
            mobileMenu.classList.add('max-h-0', 'opacity-0');

            // After transition completes, add hidden class
            setTimeout(() => {
              mobileMenu.classList.add('hidden');
            }, 300);
          } else {
            // Open menu: remove hidden first, then animate in
            mobileMenu.classList.remove('hidden');
            // Force reflow to ensure transition works
            void mobileMenu.offsetHeight;
            mobileMenu.classList.remove('max-h-0', 'opacity-0');
            mobileMenu.classList.add('max-h-screen', 'opacity-100');
          }
        });
      }

      // Services dropdown toggle (mobile)
      const servicesLink = document.getElementById('mobile-services-link');
      const servicesMenu = document.getElementById('mobile-services-menu');
      const servicesIcon = document.getElementById('mobile-services-icon');

      if (servicesLink && servicesMenu && servicesIcon) {
        servicesLink.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          const isOpen = !servicesMenu.classList.contains('hidden') && !servicesMenu.classList.contains('max-h-0');

          if (isOpen) {
            // Close: animate out, then hide
            servicesMenu.classList.remove('max-h-96', 'opacity-100', 'overflow-y-auto');
            servicesMenu.classList.add('max-h-0', 'opacity-0', 'overflow-hidden');
            servicesIcon.classList.remove('rotate-180');
            servicesLink.setAttribute('aria-expanded', 'false');

            setTimeout(() => {
              servicesMenu.classList.add('hidden');
            }, 300);
          } else {
            // Open: remove hidden, then animate in
            servicesMenu.classList.remove('hidden');
            void servicesMenu.offsetHeight;
            servicesMenu.classList.remove('max-h-0', 'opacity-0', 'overflow-hidden');
            servicesMenu.classList.add('max-h-96', 'opacity-100', 'overflow-y-auto');
            servicesIcon.classList.add('rotate-180');
            servicesLink.setAttribute('aria-expanded', 'true');
          }
        });
      }

      // Service Areas dropdown toggle (mobile)
      const areasLink = document.getElementById('mobile-areas-link');
      const areasMenu = document.getElementById('mobile-areas-menu');
      const areasIcon = document.getElementById('mobile-areas-icon');

      if (areasLink && areasMenu && areasIcon) {
        areasLink.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          const isOpen = !areasMenu.classList.contains('hidden') && !areasMenu.classList.contains('max-h-0');

          if (isOpen) {
            // Close: animate out, then hide
            areasMenu.classList.remove('max-h-96', 'opacity-100', 'overflow-y-auto');
            areasMenu.classList.add('max-h-0', 'opacity-0', 'overflow-hidden');
            areasIcon.classList.remove('rotate-180');
            areasLink.setAttribute('aria-expanded', 'false');

            setTimeout(() => {
              areasMenu.classList.add('hidden');
            }, 300);
          } else {
            // Open: remove hidden, then animate in
            areasMenu.classList.remove('hidden');
            void areasMenu.offsetHeight;
            areasMenu.classList.remove('max-h-0', 'opacity-0', 'overflow-hidden');
            areasMenu.classList.add('max-h-96', 'opacity-100', 'overflow-y-auto');
            areasIcon.classList.add('rotate-180');
            areasLink.setAttribute('aria-expanded', 'true');
          }
        });
      }

      // Desktop dropdown keyboard navigation
      document.addEventListener('DOMContentLoaded', () => {
        const dropdownTriggers = document.querySelectorAll<HTMLAnchorElement>('.group > a[aria-haspopup="true"]');

        dropdownTriggers.forEach((trigger) => {
          const parentLi = trigger.closest<HTMLLIElement>('li.group');
          if (!parentLi) return;

          const dropdown = parentLi.querySelector<HTMLElement>('[role="menu"]');
          const menuItems = dropdown?.querySelectorAll<HTMLAnchorElement>('[role="menuitem"]');

          if (!dropdown || !menuItems || menuItems.length === 0) return;

          let currentFocusIndex = -1;

          trigger.addEventListener('mouseenter', () => {
            trigger.setAttribute('aria-expanded', 'true');
            menuItems[0].setAttribute('tabindex', '0');
          });

          parentLi.addEventListener('mouseleave', () => {
            trigger.setAttribute('aria-expanded', 'false');
            currentFocusIndex = -1;
            menuItems.forEach((item) => item.setAttribute('tabindex', '-1'));
          });

          const focusMenuItem = (index: number) => {
            const item = menuItems[index];
            if (item) {
              currentFocusIndex = index;
              item.focus();
            }
          };

          trigger.addEventListener('keydown', (e: KeyboardEvent) => {
            if (e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') {
              e.preventDefault();
              focusMenuItem(0);
            }
          });

          menuItems.forEach((item, index) => {
            item.addEventListener('keydown', (e: KeyboardEvent) => {
              switch (e.key) {
                case 'ArrowDown':
                  e.preventDefault();
                  focusMenuItem((index + 1) % menuItems.length);
                  break;
                case 'ArrowUp':
                  e.preventDefault();
                  focusMenuItem((index - 1 + menuItems.length) % menuItems.length);
                  break;
                case 'Escape':
                  e.preventDefault();
                  trigger.focus();
                  parentLi.dispatchEvent(new Event('mouseleave'));
                  break;
                case 'Home':
                  e.preventDefault();
                  focusMenuItem(0);
                  break;
                case 'End':
                  e.preventDefault();
                  focusMenuItem(menuItems.length - 1);
                  break;
                default:
                  break;
              }
            });
          });
        });
      });
    </script>

    <main>
      <slot />
    </main>

    <footer class="bg-dark-darker mt-0 border-t border-gray-300/20">
      <div class="container mx-auto px-6 lg:px-12 xl:px-16 py-12">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 mb-8">
          <!-- About Us Section -->
          <div>
            <h3 class="text-dark-primary text-lg font-semibold mb-4">About us</h3>
            <p class="text-dark-tertiary text-sm leading-relaxed mb-3">
              We are the computer support professionals. We care about the health of your computer and hardware and we are committed to providing a personalised hands-on approach to ensure your computer and hardware remains in tip-top shape.
            </p>
            <a href="/about" class="text-blue-400 hover:text-blue-300 transition-colors text-sm font-medium inline-flex items-center gap-1">
              Read more...
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>

          <!-- Have any questions? Section -->
          <div>
            <h3 class="text-dark-primary text-lg font-semibold mb-4">Have any questions?</h3>
            <div class="space-y-3">
              <div class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                <a href={`mailto:${businessInfo.email}`} class="text-blue-400 hover:text-blue-300 transition-colors text-sm">
                  {businessInfo.email}
                </a>
              </div>
              <div class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
                <a href={`tel:${businessInfo.phone}`} class="text-blue-400 hover:text-blue-300 transition-colors text-sm">
                  {businessInfo.phone}
                </a>
              </div>
            </div>
          </div>

          <!-- Social Media Section -->
          <div>
            <h3 class="text-dark-primary text-lg font-semibold mb-4 text-center">Find Us in Social Media:</h3>
            <div class="flex gap-4 justify-center">
              <a 
                href={socialMedia.facebook} 
                target="_blank" 
                rel="noopener noreferrer"
                class="w-10 h-10 bg-white rounded flex items-center justify-center hover:bg-gray-100 transition-colors"
                aria-label="Facebook"
              >
                <svg class="w-5 h-5 text-gray-800" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                </svg>
              </a>
              <a 
                href={socialMedia.youtube} 
                target="_blank" 
                rel="noopener noreferrer"
                class="w-10 h-10 bg-white rounded flex items-center justify-center hover:bg-gray-100 transition-colors"
                aria-label="YouTube"
              >
                <svg class="w-5 h-5 text-gray-800" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd"></path>
                </svg>
              </a>
              <a 
                href={socialMedia.instagram} 
                target="_blank" 
                rel="noopener noreferrer"
                class="w-10 h-10 bg-white rounded flex items-center justify-center hover:bg-gray-100 transition-colors"
                aria-label="Instagram"
              >
                <svg class="w-5 h-5 text-gray-800" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                </svg>
              </a>
            </div>
          </div>
        </div>

        <!-- Copyright Section -->
        <div class="border-t border-dark mt-8 pt-6 text-center">
          <p class="text-dark-muted text-xs mb-2">
            &copy; {new Date().getFullYear()} {siteConfig.name} - All Rights Reserved. {businessInfo.companyRegistration}
          </p>
          <p class="text-dark-muted text-xs">
            <a href="/privacy-policy" class="text-blue-400 hover:text-blue-300 transition-colors">Privacy Policy</a>
          </p>
        </div>
      </div>
    </footer>
  </body>
</html>


